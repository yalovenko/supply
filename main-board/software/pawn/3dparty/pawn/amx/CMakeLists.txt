
# --------------------------------------------------------------------------
# Simple run-time (example program)
if ( UNIX )
    include_directories( "../linux" )
endif ( UNIX )

SET(PAWNRUN_SRCS pawnrun.c amx.c amxcore.c amxcons.c amxpool.c amxdbg.c)
IF (UNIX)
  SET(PAWNRUN_SRCS ${PAWNRUN_SRCS} ../linux/binreloc.c)
  IF(NOT HAVE_CURSES_H)
    SET(PAWNRUN_SRCS ${PAWNRUN_SRCS} ../linux/getch.c)
  ENDIF(NOT HAVE_CURSES_H)
ENDIF (UNIX)
ADD_EXECUTABLE(pawnrun ${PAWNRUN_SRCS})
SET_TARGET_PROPERTIES(pawnrun PROPERTIES COMPILE_FLAGS -DAMXDBG COMPILE_FLAGS -DENABLE_BINRELOC)
IF (UNIX)
  IF(HAVE_CURSES_H)
    SET_TARGET_PROPERTIES(pawnrun PROPERTIES COMPILE_FLAGS -DUSE_CURSES)
    TARGET_LINK_LIBRARIES(pawnrun dl curses)
  ELSE(HAVE_CURSES_H)
    TARGET_LINK_LIBRARIES(pawnrun dl)
  ENDIF(HAVE_CURSES_H)
ENDIF (UNIX)

# --------------------------------------------------------------------------
# Simple console debugger

SET(PAWNDBG_SRCS pawndbg.c amx.c amxcore.c amxcons.c amxpool.c amxdbg.c)
IF (UNIX)
  SET(PAWNDBG_SRCS ${PAWNDBG_SRCS} ../linux/binreloc.c)
  IF(NOT HAVE_CURSES_H)
    SET(PAWNDBG_SRCS ${PAWNDBG_SRCS} ../linux/getch.c)
  ENDIF(NOT HAVE_CURSES_H)
ENDIF (UNIX)
ADD_EXECUTABLE(pawndbg ${PAWNDBG_SRCS})
SET_TARGET_PROPERTIES(pawndbg PROPERTIES COMPILE_FLAGS -DENABLE_BINRELOC)
IF (UNIX)
  IF(HAVE_CURSES_H)
    SET_TARGET_PROPERTIES(pawndbg PROPERTIES COMPILE_FLAGS -DUSE_CURSES)
    TARGET_LINK_LIBRARIES(pawndbg dl curses)
  ELSE(HAVE_CURSES_H)
    TARGET_LINK_LIBRARIES(pawndbg dl)
  ENDIF(HAVE_CURSES_H)
ENDIF (UNIX)
install( TARGETS pawndbg DESTINATION "./pawn" )
